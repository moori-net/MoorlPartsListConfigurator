{% set partsListConfigurator = page.partsListConfigurator %}
{% set config = {
    partsListUrl: path('frontend.moorl.parts.list.configurator.parts.list', {partsListConfiguratorId: partsListConfigurator.id}),
    logicalConfiguratorUrl: path('frontend.moorl.parts.list.configurator.logical.configurator', {partsListConfiguratorId: partsListConfigurator.id}),
    propertyGroupConfig: page.calculator.getPropertyGroupConfig
} %}

<div
        class="cms-element-moorl-parts-list-configurator"
        data-moorl-parts-list-configurator="true"
        data-moorl-parts-list-configurator-options="{{ config|json_encode }}"
>
    <form action="{{ path('frontend.moorl.parts.list.configurator.parts.list', {partsListConfiguratorId: partsListConfigurator.id}) }}">
        {% for filter in partsListConfigurator.getFilters %}
            {% if not filter.fixed %}
                {% sw_include "@MoorlPartsListConfigurator/plugin/moorl-parts-list-configurator/component/configurator.html.twig" with {
                    configuratorSettings: filter.options.groupByPropertyGroups,
                    logical: filter.logical,
                    identifier: filter.id,
                } %}
            {% endif %}
        {% endfor %}
    </form>

    <hr>

    <div id="partsList"></div>
</div>
