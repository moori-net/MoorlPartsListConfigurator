const l=`<div class="moorl-parts-list-calculator"> <template v-if="partsListConfigurator.type === 'calculator' && calculatorOptions.length > 0"> <moorl-select-field v-model:value="partsListConfigurator.calculator" @update:value="refresh" :label="$tc('moorl-foundation.field.calculator')" :customSet="calculatorOptions" /> <sw-data-grid v-if="mapping.length > 0" :data-source="mapping" :columns="gridColumns" :show-selection="false" :plain-appearance="true" :show-actions="false" > <template #column-value="{ item, itemIndex }"> <sw-entity-single-select v-model:value="partsListConfigurator.mapping[item.name]" :entity="item.entity" /> </template> </sw-data-grid> </template> </div>`;Shopware.Component.register("moorl-parts-list-calculator",{template:l,inject:["foundationApiService","repositoryFactory"],props:{partsListConfigurator:{type:Object,required:!0}},data(){return{calculators:[],mapping:[]}},computed:{calculatorOptions(){return Object.keys(this.calculators)},gridColumns(){return[{label:this.$tc("moorl-foundation.field.entity"),property:"entity",dataIndex:"entity",primary:!0},{label:this.$tc("moorl-foundation.field.name"),property:"name",dataIndex:"name",primary:!0},{label:this.$tc("moorl-foundation.field.flags"),property:"flags",dataIndex:"flags",primary:!0},{label:this.$tc("moorl-foundation.field.value"),property:"value",dataIndex:"value",primary:!0,width:"320px"}]}},created(){this.createdComponent()},methods:{createdComponent(){this.foundationApiService.get("/moorl-pl/get-parts-list-calculators").then(t=>{this.calculators=t,this.refresh()})},refresh(){this.initMapping()},initMapping(){var t,e;if((t=this.partsListConfigurator).mapping??(t.mapping={}),this.mapping=[],!(!this.partsListConfigurator.calculator||this.calculators.length===0))for(const[i,r]of Object.entries(this.calculators[this.partsListConfigurator.calculator]))for(const[o,a]of Object.entries(r))(e=this.partsListConfigurator.mapping)[o]??(e[o]=null),this.mapping.push({entity:i,name:o,flags:a.join(",")})}}});const s='{% block sw_property_option_detail_media %} {% parent %} <div class="sw-field"></div> <sw-custom-field-set-renderer :entity="currentOption" :sets="customFieldSets" /> {% endblock %}';Shopware.Component.override("sw-property-option-detail",{template:s,inject:["customFieldDataProviderService"],data(){return{customFieldSets:null}},created(){this.loadCustomFieldSets()},methods:{loadCustomFieldSets(){this.customFieldDataProviderService.getCustomFieldSets("property_group_option").then(t=>{this.customFieldSets=t})}}});const n=`<div class="sw-cms-el-config-moorl-parts-list-configurator"> <sw-cms-mapping-field v-model:config="element.config.partsListConfigurator" value-types="string"> <sw-entity-single-select :label="$tc('sw-cms.elements.moorl-parts-list-configurator.name')" v-model:value="element.config.partsListConfigurator.value" @update:value="onChangePartsListConfigurator" entity="moorl_pl" /> </sw-cms-mapping-field> </div>`,{Criteria:p}=Shopware.Data;Shopware.Component.register("sw-cms-el-config-moorl-parts-list-configurator",{template:n,mixins:[Shopware.Mixin.getByName("cms-element")],inject:["repositoryFactory"],computed:{formRepository(){return this.repositoryFactory.create("moorl_pl")}},created(){this.createdComponent()},methods:{createdComponent(){this.initElementConfig("moorl-parts-list-configurator"),this.initElementData("moorl-parts-list-configurator")},onChangePartsListConfigurator(t){if(!t)this.element.config.partsListConfigurator.value=null,this.element.data.partsListConfigurator=null;else{const e=new p;this.formRepository.get(t,Shopware.Context.api,e).then(i=>{this.element.config.partsListConfigurator.value=t,this.element.data.partsListConfigurator=i})}this.$emit("element-update",this.element)}}});const m=`<div class="sw-cms-el-moorl-default"> <div> {{ $tc('sw-cms.elements.moorl-parts-list-configurator.name') }} </div> <template v-if="partsListConfigurator"> <div class="small"> {{ partsListConfigurator.translated.name }} </div> <router-link class="mt-button" target="_blank" rel="noopener" :to="{ name: 'moorl.parts.list.configurator.detail', params: { id: partsListConfigurator.id } }" > {{ $tc('global.default.edit') }} </router-link> </template> <template v-else> <router-link class="mt-button" target="_blank" rel="noopener" :to="{ name: 'moorl.parts.list.configurator.list' }" > {{ $tc('global.default.add') }} </router-link> </template> </div>`;Shopware.Component.register("sw-cms-el-moorl-parts-list-configurator",{template:m,mixins:[Shopware.Mixin.getByName("cms-element")],computed:{partsListConfigurator(){var t;return(t=this.element.data)==null?void 0:t.partsListConfigurator}},created(){this.createdComponent()},methods:{createdComponent(){this.initElementConfig("moorl-parts-list-configurator"),this.initElementData("moorl-parts-list-configurator")}}});Shopware.Application.getContainer("service").cmsService.registerCmsElement({plugin:"MoorlPartsListConfigurator",icon:"regular-3d",name:"moorl-parts-list-configurator",label:"sw-cms.elements.moorl-parts-list-configurator.name",component:"sw-cms-el-moorl-parts-list-configurator",configComponent:"sw-cms-el-config-moorl-parts-list-configurator",previewComponent:!0,defaultConfig:{partsListConfigurator:{source:"static",value:null,entity:{name:"moorl_pl"}}}});function c(t){window.MoorlFoundation?t():window.addEventListener("MoorlFoundationReady",t,{once:!0})}c(()=>{MoorlFoundation.ModuleHelper.registerModule({entity:"moorl_pl",name:"moorl-parts-list-configurator",navigationParent:"sw-catalogue",pageType:"parts_list_configurator_detail",properties:[{name:"active",visibility:100},{name:"name",visibility:200}],pluginName:"MoorlPartsListConfigurator",demoName:"standard",entityMapping:{filters:{tab:"relations",componentName:"moorl-entity-grid-card-v2"},type:{componentName:"moorl-select-field",attributes:{customSet:[{value:"calculator",label:"moorl-parts-list-configurator.type.calculator"},{value:"filter",label:"moorl-parts-list-configurator.type.filter"}]}},calculator:{conditions:[{property:"type",value:"calculator",operator:"eq"}],cols:12,componentName:"moorl-parts-list-calculator",attributes:{partsListConfigurator:({item:t})=>t}}},cmsElements:[{name:"parts-list-configurator-listing",parent:"listing",icon:"regular-view-grid",cmsElementEntity:{associations:["cover.media"],propertyMapping:{media:"cover.media",name:["translated.name","name"],description:["translated.teaser","teaser"]}}}]}),MoorlFoundation.ModuleHelper.registerModule({entity:"moorl_pl_filter",name:"moorl-parts-list-filter",properties:[{name:"position",visibility:200},{name:"fixed",visibility:50},{name:"logical",visibility:100},{name:"technicalName",visibility:100},{name:"partsListConfigurator.name",visibility:100},{name:"options",visibility:0}],entityMapping:{options:{tab:"relations",card:"relations"}}})});
//# sourceMappingURL=moorl-parts-list-configurator-BGbgweyf.js.map
